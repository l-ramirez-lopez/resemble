<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>welcome to the resemble Project by l-ramirez-lopez</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1><font color=B50202>welcome to the resemble Project</font> </h1>
        <p></p>

        <p class="view"><a href="https://github.com/l-ramirez-lopez/resemble">View the Project on GitHub <small>l-ramirez-lopez/resemble</small></a></p>


        <ul>
          <li><a href="https://github.com/l-ramirez-lopez/resemble/archive/1.2.2.zip">Download <strong>ZIP file</strong></a></li>
          <li><a href="https://github.com/l-ramirez-lopez/resemble/archive/1.2.2.tar.gz">Download <strong>TARBALL </strong></a></li>
          <li><a href="https://github.com/l-ramirez-lopez/resemble">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <p><img src="https://github.com/l-ramirez-lopez/resemble/blob/master/resemble_logo.png?raw=true" alt="image"></p>

<h1>
<a name="regression-and-similarity-evaluation-for-memory-based-learning-in-spectral-chemometrics-" class="anchor" href="#regression-and-similarity-evaluation-for-memory-based-learning-in-spectral-chemometrics-"><span class="octicon octicon-link"></span></a><font color=B50202>Regression and similarity evaluation for memory-based learning in spectral chemometrics Â©</font></h1>

<p><em>Leonardo Ramirez-Lopez &amp; Antoine Stevens</em></p>
<p><em><font color=B50202>Last update: 26.03.2019 :::: 10:05 GMT+2</font></em></p>

<p>The current (released) version of the <code>resemble</code> package can be downloaded and installed directly from the <a href=" http://cran.r-project.org/web/packages/resemble/index.html">CRAN repository</a>. Pretty simple, you just have to type in your R console: </p>
<pre><code>install.packages('resemble')
</code></pre>

If you do not have the following packages installed, in some cases it is better to isntall them first</p>

<pre><code>install.packages('Rcpp')
install.packages('RcppArmadillo')
install.packages('foreach')
install.packages('iterators')
</code></pre>

<p><font color=B50202>NOTE:</font> Apart from these packages we stronly recommend to download and install Rtools (<a href="http://cran.r-project.org/bin/windows/Rtools/">directly from here</a> or from CRAN <a href="https://cran.r-project.org/bin/windows/Rtools/">https://cran.r-project.org/bin/windows/Rtools/)</a>. This is important for obtaining the proper C++ toolchain that you might need for using <code>resemble</code>.</p>

<p>Then, install <code>resemble</code>:</p>

<p>In this website you can also get the last development version of the <code>resemble</code> package. You can download the <a href="https://github.com/l-ramirez-lopez/resemble/archive/1.2.2.zip">binary (.zip) file </a> or the <a href="https://github.com/l-ramirez-lopez/resemble/archive/1.2.2.tar.gz">source file (.tar.gz) </a> by selecting the corresponding option in the left panel. Remeber you should have <a href="http://cran.r-project.org/">R&gt;=3.2.2</a>. Supose you downloaded the binary file to 'C:/MyFolder/', then you should be able to install the package as follows:</p>

<pre><code>install.packages('C:/MyFolder/resemble-1.2.2.zip', repos = NULL)
</code></pre>

<p>or</p>

<pre><code>install.packages('C:/MyFolder/resemble-1.2.2.tar.gz', type = 'source', repos = NULL)
</code></pre>

<p>You can also install the <code>resemble</code> package directly from github using <a href="http://cran.r-project.org/web/packages/devtools/index.html"><code>devtools</code></a> (with a proper installed version of <a href="http://cran.r-project.org/bin/windows/Rtools/">Rtools</a>):</p>

<pre><code>require("devtools")
install_github("resemble","l-ramirez-lopez")
</code></pre>

<p>After installing <code>resemble</code> you should be also able to run the following lines:</p>

<pre><code>require(resemble)

help(mbl)

#install.packages('prospectr')
require(prospectr)

data(NIRsoil)

Xu &lt;- NIRsoil$spc[!as.logical(NIRsoil$train),]
Yu &lt;- NIRsoil$CEC[!as.logical(NIRsoil$train)]
Yr &lt;- NIRsoil$CEC[as.logical(NIRsoil$train)]
Xr &lt;- NIRsoil$spc[as.logical(NIRsoil$train),]

Xu &lt;- Xu[!is.na(Yu),]
Xr &lt;- Xr[!is.na(Yr),]

Yu &lt;- Yu[!is.na(Yu)]
Yr &lt;- Yr[!is.na(Yr)]

# Example of the mbl function
# A mbl approach (the spectrum-based learner) as implemented in Ramirez-Lopez et al. (2013)
# An exmaple where Yu is supposed to be unknown, but the Xu (spectral variables) are known
ctrl1 &lt;- mblControl(sm = 'pc', pcSelection = list('opc', 40),
                    valMethod = 'NNv', center = TRUE)

sbl.u &lt;- mbl(Yr = Yr, Xr = Xr, Yu = NULL, Xu = Xu,
             mblCtrl = ctrl1,
             dissUsage = 'predictors',
             k = seq(40, 150, by = 10),
             method = 'gpr')

getPredictions(sbl.u)
plot(sbl.u)
</code></pre>

<p><a href="http://l-ramirez-lopez.github.io/resemble/"><code>resemble</code></a> implements a function dedicated to non-linear modelling of complex visible and infrared spectral data based on memory-based learning (MBL, <em>a.k.a</em> instance-based learning or local modelling in the chemometrics literature). The package also includes functions for: computing and evaluate spectral similarity/dissimilarity matrices; projecting the spectra onto low dimensional orthogonal variables; removing irrelevant spectra from a reference set; etc. </p>

<hr><p>The functions for computing and evaluate spectral similarity/dissimilarity matrices can be summarized as follows:</p>

<p><strong><code>fDiss</code></strong>: Euclidean and Mahalanobis distances as well as the cosine dissimilarity (<em>a.k.a</em> spectral angle mapper)<br><strong><code>corDiss</code>:</strong>                correlation and moving window correlation dissimilarity<br><strong><code>sid</code></strong>:                    spectral information divergence between spectra or between the probability distributions of spectra<br><strong><code>orthoDiss</code></strong>:              principal components and partial least squares dissimilarity (including several options)<br><strong><code>simEval</code></strong>:                evaluates a given similarity/dissimilarity matrix based on the concept of side information                 </p>

<hr><p>The functions for projecting the spectra onto low dimensional orthogonal variables are:</p>

<p><strong><code>pcProjection</code></strong>:            projects the spectra onto a principal component space<br><strong><code>plsProjection</code></strong>:           projects the spectra onto a partial least squares component space  (<em>a.k.a</em> projection to latent structures)<br><strong><code>orthoProjection</code></strong>:         reproduces either the <code>pcProjection</code> or the <code>plsProjection</code> functions                                          </p>

<hr><p>The projection functions also offer different options for optimizing/selecting the number of components involved in the projection.</p>

<p>The functions modelling the spectra using memory-based learning are:</p>

<p><strong><code>mblControl</code></strong>:              controls some modelling aspects of the <code>mbl</code> function<br><strong><code>mbl</code></strong>:                     models the spectra by memory-based learning                                                    </p>

<hr><p>Some additional miscellaneous functions are:</p>

<p><strong><code>print.mbl</code></strong>:prints a summary of the results obtained by the <code>mbl</code> function<br><strong><code>plot.mbl</code></strong>:                plots a summary of the results obtained by the <code>mbl</code> function<br><strong><code>print.localOrthoDiss</code></strong>:    prints local distance matrices generated with the <code>orthoDiss</code> function </p>

<hr><p>In order to expand a little bit more the explanation on the <code>mbl</code> function, let's define first the basic input datasets:</p>

<ul>
<li><p><strong>Reference (training) set</strong>: Dataset with <em>n</em> reference samples (e.g. spectral library) to be used in the calibration of spectral models. Xr represents the matrix of samples (containing the spectral predictor variables) and Yr represents a given response variable corresponding to Xr.</p></li>
<li><p><strong>Prediction set</strong> : Data set with <em>m</em> samples where the response variable (Yu) is unknown. However it can be predicted by applying a spectral model (calibrated by using Xr and Yr) on the spectra of these samples (Xu). </p></li>
</ul><p>In order to predict each value in Yu, the <code>mbl</code> function takes each sample in Xu and searches in Xr for its <em>k</em>-nearest neighbours (most spectrally similar samples). Then a (local) model is calibrated with these (reference) neighbours and it immediately predicts the correspondent value in Yu from Xu. In the function, the <em>k</em>-nearest neighbour search is performed by computing spectral similarity/dissimilarity matrices between samples. The <code>mbl</code> function offers the following regression options for calibrating the (local) models:</p>

<p><strong><code>'gpr'</code></strong>:                                   Gaussian process with linear kernel<br><strong><code>'pls'</code></strong>:                                   Partial least squares<br><strong><code>'wapls1'</code></strong>:                                Weighted average partial least squares 1<br><strong><code>'wapls2'</code></strong>:                                Weighted average partial least squares 2 (<font color=B50202>no longer supported</font>)   </p>

<h2>
<a name="keywords" class="anchor" href="#keywords"><span class="octicon octicon-link"></span></a>Keywords</h2>

<ul>
<li><em>Infrared spectroscopy</em></li>
<li><em>Chemometrics</em></li>
<li><em>Local modelling</em></li>
<li><em>Spectral library</em></li>
<li><em>Lazy learning</em></li>
<li><em>Soil spectroscopy</em></li>
</ul><h2>
<a name="news" class="anchor" href="#news"><span class="octicon octicon-link"></span></a>News</h2>
<ul>
  
<li>2019-03: Another paper using <code>resemble</code> ... I just published a <a href="https://onlinelibrary.wiley.com/doi/10.1111/ejss.12752">scientific paper</a> were we used memory-based learning (MBL) for digital soil mapping. Here we use MBL to remove local calibration outliers rather than using this approach to overcome the typical complexity of large spectral datasets. (RamirezâLopez, L., Wadoux, A. C., Franceschini, M. H. D., Terra, F. S., Marques, K. P. P., SayÃ£o, V. M., & DemattÃª, J. A. M. (2019). Robust soil mapping at the farm scale with visâNIR spectroscopy. European Journal of Soil Science. 70, 378â393).
<li>2018-11: In <a href="https://www.frontiersin.org/articles/10.3389/fpls.2018.01642/full>this recent scientific paper</a> the authors used <code>resemble</code> to predict the chemoical composition of Common Beans in Spain. (Rivera, A., Plans, M., SabatÃ©, J., CasaÃ±as, F., Casals, J., Rull, A., & SimÃ³, J. (2018). The Spanish core collection of common beans (Phaseolus vulgaris L.): an important source of variability for breeding chemical composition. Frontiers in Plant Science, 9)
<li>2016-05: In <a href="http://www.sciencedirect.com/science/article/pii/S001670611630180X">this recent scientific paper</a> the authors sucesfully used <code>resemble</code> to predict soil organic carbon content for at national scale in France.</li>
<li>2016-04: <a href="http://www.mdpi.com/2072-4292/8/4/341">This paper</a> shows some interesting results on appliying memory-based learning to predict soil properties.</li>
<li>2016-04: In <a href="http://nir-quimiometria.blogspot.com/">some recent entries of this blog</a> the author shows some examples on the use of <code>resemble</code>.</li>
<li>2016-02: As promised, the version 1.2 (alma-de-coco) is now available on <a href="https://cran.r-project.org/web/packages/resemble/index.html">CRAN</a>!</li>
<li>2016-01: The version 1.2 (alma-de-coco) has been submitted to CRAN and is available from the github repository!</li>
<li>2015-11: A pre-release of the version 1.2.0 (1.2.0.9000 'alma-de-coco') is now available! <code>resemble</code> is now faster! Some critical functions (e.g. pls and gaussian process regressions were re-written in C++ using Rcpp). This time the new version will be available at CRAN very soon! (we promise).</li>
<li>2015-11: Well, the version 1.1.3 was never released on CRAN since we decided to carry out major improvements in terms of computational performance</li>
<li>2014-10: A pre-release of the version 1.1.3 of the package is already available at this website. We hope it will be available at CRAN very soon!</li>
<li>2014-06: Check <a href="https://www.youtube.com/watch?v=7sCIEeNehgE&feature=youtu.be">this video</a> where a renowned NIR scientist talks about local calibrations.</li>
<iframe width="640" height="360" src="https://www.youtube.com/embed/7sCIEeNehgE" frameborder="0" allowfullscreen></iframe>
<li>2014-04: A short note on the <code>resemble</code> and <a href="http://antoinestevens.github.io/prospectr/"><code>prospectr</code></a> packages was published in <a href="http://www.pedometrics.org/Pedometron/Pedometron34.pdf">this newsletter</a>. There we provide some examples on representative subset selection and on how to reproduce the LOCAL and spectrum-based learner algorithms. In those examples the dataset  of the Chemometric challenge of <a href="http://www.sciencedirect.com/science/article/pii/S0169743907001190">'ChimiomÃ©trie 2006'</a> (included in the  <a href="http://antoinestevens.github.io/prospectr/"><code>prospectr</code></a> package) is used.</li>
<li>2014-03: The package was released on CRAN!</li>
</ul>

<h2>
<a name="other-related-stuff" class="anchor" href="#other-related-stuff"><span class="octicon octicon-link"></span></a>Other R'elated stuff</h2>

<ul>
<li><a href="http://antoinestevens.github.io/prospectr/">Check out our other project called <code>prospectr</code>.</a></li>
<li><a href="http://www.fao.org/fileadmin/user_upload/GSP/docs/Spectroscopy_dec13/SSW2013_f.pdf"> Check this presentation in which we used the <code> resemble </code> package to predict soil attributes from large scale soil spectral libraries. </a></li>
</ul><h2>
<a name="bug-report,-development-version-and-questions" class="anchor" href="#bug-report-and-development-version"><span class="octicon octicon-link"></span></a>Bug report and development version</h2>

<p>If you detect bugs, or if you have a question or request you can just send an e-mail to Leo who is the package maintainer (<a href="mailto:ramirez.lopez@gmail.com">ramirez.lopez@gmail.com</a>) or create an <a href="https://github.com/l-ramirez-lopez/resemble/issues">issue</a> on github. We would be happy to hear from you!</p>


      </section>
      <footer>
        <p>This project is maintained by <br><a href="https://github.com/l-ramirez-lopez">Leo Ramirez-Lopez (l-ramirez-lopez)</a></br></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-46376363-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
