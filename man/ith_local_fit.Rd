% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/funlib.R
\name{ith_local_fit}
\alias{ith_local_fit}
\title{Internal: Fit a local weighted PLS model and predict for a query point}
\usage{
ith_local_fit(
  ilocalsubset,
  min_component,
  max_component,
  emgrid,
  scale,
  maxiter,
  tol,
  pc_selection,
  ...
)
}
\arguments{
\item{ilocalsubset}{A list with elements:
\itemize{
\item{\code{x}}: matrix of predictors from the local neighborhood.
\item{\code{y}}: vector or 1-col matrix of corresponding responses.
\item{\code{xval}}: query sample (usually one row) to predict.
}}

\item{min_component}{Minimum number of PLS components to use in prediction.}

\item{max_component}{Maximum number of PLS components to fit.}

\item{emgrid}{A numeric matrix used to weight component-wise predictions.}

\item{scale}{Logical; whether to scale predictors before PLS fitting.}

\item{maxiter}{Maximum number of iterations for the PLS algorithm.}

\item{tol}{Convergence tolerance for the PLS algorithm.}

\item{pc_selection}{A list defining the principal component selection
strategy. (Included for consistency, not used directly here.)}

\item{...}{Additional arguments (currently unused).}
}
\value{
A numeric matrix of weighted predictions (rows = grid rows, 1 column).
}
\description{
Fits a local Partial Least Squares (PLS) model using a neighborhood subset
and computes a weighted prediction for a target sample. The weighting is
done over multiple components using a provided evaluation grid.
}
\details{
The function performs the following steps:
\enumerate{
\item Fits a PLS model on \code{ilocalsubset$x} and \code{ilocalsubset$y} with
up to \code{max_component} components.
\item Computes component weights for \code{ilocalsubset$xval} using
\code{get_local_pls_weights()}.
\item Predicts component-wise responses using \code{predict_opls()}.
\item Applies a weighted average of predictions using \code{emgrid} and the
component weights.
}
The output is a matrix of weighted predictions using the weighted model grid.
}
\author{
Leonardo Ramirez-Lopez
}
\keyword{internal}
