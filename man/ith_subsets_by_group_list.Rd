% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/funlib.R
\name{ith_subsets_by_group_list}
\alias{ith_subsets_by_group_list}
\title{Grouped KNN Subset Iterator with Chunking}
\usage{
ith_subsets_by_group_list(x, y, kindx, kgroup, D = NULL, n_chunks = 1)
}
\arguments{
\item{x}{A numeric matrix (n × p) representing the full reference dataset.}

\item{y}{A numeric matrix or vector (n × 1) of associated response values.}

\item{kindx}{An integer matrix (k × n) where each column contains indices of
the \code{k} nearest neighbors for the corresponding observation.}

\item{kgroup}{A logical or integer matrix (k × n) indicating a group
(subset) of rows from \code{kindx} to be selected for each observation.}

\item{D}{Optional numeric matrix (n × n) representing a dissimilarity or
distance matrix. If provided, its values for selected neighbors will be
embedded into the \code{xval} vector.}

\item{n_chunks}{Integer. The number of column-wise chunks to partition the
iteration over. Defaults to 5.}
}
\value{
An iterator object that returns, at each call of \code{nextElem()}, a list
of lists. Each inner list contains:
\itemize{
\item \code{x}: the reference subset (\verb{k × p} or \verb{k × (p + k)} if \code{D} used),
\item \code{y}: the corresponding responses (\verb{k × 1}),
\item \code{xval}: the target sample (\verb{1 × p}) or extended with dissimilarities.
}
}
\description{
Creates an iterator over grouped subsets of rows from \code{x} and \code{y} based on
nearest neighbor indices (\code{kindx}) and group selectors (\code{kgroup}). The
iteration is performed in \code{n_chunks} of columns from the input matrices, and
optionally incorporates a dissimilarity matrix \code{D}.
}
\details{
This iterator is useful when local models need to be built for each
observation using a selected group of its neighbors (\code{kgroup}) from \code{kindx},
and optionally enhanced with pairwise distances via \code{D}.

When \code{D} is provided, the function will include the distances between the
target observation and its selected neighbors in the \code{xval} element of each
result.
}
\seealso{
\code{\link[iterators:iter]{iterators::iter()}}, \code{\link[=nextElem]{nextElem()}}
}
\keyword{internal}
