% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/cor_diss.R
\name{compute_block_rows}
\alias{compute_block_rows}
\title{Choose a cache-friendly tile size (rows) from m and T (no options/env)}
\usage{
compute_block_rows(dimensions)
}
\arguments{
\item{dimensions}{a vector of two integers representing the number of rows
(samples) and the number of columns (features)}
}
\value{
integer block_rows (multiple of 64), clamped; if m < 64, returns m
}
\description{
Heuristic:
\itemize{
\item Working-set budget K ≈ 24 MB of doubles → K = 3e6.
\item Solve 3\emph{b^2 + 2}T*b ≈ K for b: b_T = (-T + sqrt(T^2 + 3K)) / 3.
\item Limit by m via ~12 tiles/axis: b_m = m / 12.
\item Pick b* = round_to_64( min( max(64, b_m), b_T ) ), then clamp to \link{64, min(1024, m)}.
}
}
\examples{
compute_block_rows(c(2475, 700))   # ~256
compute_block_rows(c(80000, 700))  # ~768..1024 (clamped to 1024 if needed)
compute_block_rows(c(50, 700))     # 50 (since m < 64)
}
\keyword{internal}
